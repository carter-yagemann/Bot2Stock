# -*- coding: utf8 -*-

import time
import threading

from icapserver import *

#set_logger('debug')
content_hacked = ['<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" version="XHTML+RDFa 1.0" dir="ltr">\n<head profile="http://www.w3.org/1999/xhtml/vocab">\n    <meta http-equiv="X-UA-Compatible" content="IE=edge" />\n    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />\n    <meta name="application-name" content="Investopedia"/>\n    <meta name="viewport" content="width=device-width, initial-scale=1">\n    <meta http-equiv="X-UA-Compatible" content="IE=9">\n\n    <!-- Page Taxonomy -->\n<script type="text/javascript">\n//<![CDATA[\n  var _pageTaxonomy = {\n    "Hashkey": "$simulator$trade$showopentrades",\n    "Channel": "Simulator",\n    "SubChannel": "",\n    "Advertising": "Investing",\n    "SubAdvertising": "Simulator",\n    "AdTarget": "investopedia.com/simulator",\n    "DfpTarget": "Investing/Investing",\n    "Tags": null,\n    "Type": "Simulator",\n    "Lucrativeness": null,\n    "Timelessness": "Timeless",\n    "Feature": "",\n    "Design": "",\n    "InterestLevel": null,\n    "Path" : "/simulator/trade/showopentrades.aspx",\n  };\n//]]>\n</script>\n<!-- End Page Taxonomy -->\n    <script language="javascript" type="text/javascript">var idc_slots = {};\n        idc_slots.slots = ["AdSlot_AF-Top-Leaderboard","AdSlot_AF-Left-Multi","AdSlot_BF-R', 'ight-Button1","AdSlot_BF-Right-Button2","AdSlot_BF-Right-Button3","AdSlot_BF-Right-Button4"];\n        idc_slots.build = function(slot) {\n            return "/479/INV-NA/Investing/Investing/position/Simulator".replace("position", slot.position);\n        };</script><script type="text/javascript">\n            idc_slots.slots.push({\n                        "AdSlot_AF-Top-Leaderboard" : {\n                            sizeMappings: [\n                                {\n                                    viewportSize: [1000, 1],\n                                    slotSizes: [[728, 90], [970, 90], [950, 90], [960, 90], [970, 66], [980, 90],"fluid"]\n                                },\n                                {\n                                    viewportSize: [700, 1],\n                                    slotSizes: [[728, 90], [468, 60]]\n                                },\n                                {\n                                    viewportSize: [400, 1],\n                                    slotSizes: [468, 60]\n                                },\n                                {\n                                    viewportSize: [0, 0],\n                                    slotSizes: [[320, 50], [320, 100]]\n                                }\n                            ],\n                            amzSizes : {\n                                de', 'sktop: [[728 ,90]],\n                                tablet: [[728 ,90]],\n                                phone: [[728 ,90], [320,50]]\n                            }\n                        }});\n                </script>\n\n    <title>Investopedia Stock Simulator - Investopedia Stock Simulator - Open Trades</title><meta name="Description" content="Fantasy&#x20;stock&#x20;market&#x20;game&#x20;that&#x20;simulates&#x20;trading&#x20;stocks&#x20;and&#x20;options.">\n<meta name="viewport" content="width&#x3D;device-width,&#x20;initial-scale&#x3D;1">\n<meta name="Description" content="Fantasy&#x20;stock&#x20;market&#x20;game&#x20;that&#x20;simulates&#x20;trading&#x20;stocks&#x20;and&#x20;options.">\n<meta name="viewport" content="width&#x3D;device-width,&#x20;initial-scale&#x3D;1">    <link rel="canonical" href="https://www.investopedia.com/simulator/trade/showopentrades.aspx" />\n    <link href="https&#x3A;&#x2F;&#x2F;i.investopedia.com&#x2F;public&#x2F;img&#x2F;favicon.ico" rel="shortcut&#x20;icon" type="image&#x2F;vnd.microsoft.icon">\n<link href="https&#x3A;&#x2F;&#x2F;i.investopedia.com&#x2F;dest&#x2F;css&#x2F;simulator.css&#x3F;v&#x3D;201805230915" media="screen" rel="stylesheet" type="text&#x2F;css">\n<link href="https&#x3A;&#x2F;&#x2F;i.investopedia.com&#x2F;public&#x2F;img&#x2F;favicon.ico" rel="shortcut&#x20;icon" type="image&#x2F;vnd.microsoft.icon"><scr', 'ipt language="javascript" type="text/javascript">\n    var googletag = googletag || {};\n    googletag.cmd = googletag.cmd || [];\n</script><script language="javascript" type="text/javascript">\n    var sem_pageview = false;\n    var sem_ocode = \'9999\';\n    var sem_ldid = \'\';\n    var sem_sh = \'\';\n    function updateSemVariable(query) {\n        if (query[1] === undefined) {\n            return;\n        }\n        switch(query[0]) {\n            case \'o\':\n                sem_ocode = query[1];\n                break;\n            case \'ldid\':\n                sem_ldid = query[1];\n                break;\n            case \'sh\':\n                sem_sh = query[1];\n                break;\n        }\n    }\n    function getCookie(cname) {\n        var name = cname + "=";\n        var ca = document.cookie.split(\';\');\n        for (var i = 0; i < ca.length; i++) {\n            var c = ca[i];\n            while (c.charAt(0) == \' \') c = c.substring(1);\n            if (c.indexOf(name) == 0) return c.substring(name.length,c.length);\n        }\n        return "";\n    }\n    function getSemCookie() {\n        var queryStr = getCookie(\'semuser\');\n        if (queryStr == "") {\n            return;\n        }\n        sem_pageview = true;\n        var queries = queryStr.split("&");\n        for (var i = 0, l = queries.length; i < l; i++) {\n            var query = queries[i].split(\'=\');\n          ', '  updateSemVariable(query);\n        }\n    }\n    getSemCookie();\n    var updateAup = function(aUp) {\n        aUp = aUp.replace("INV-NA", "invsem-serp-ds");\n        var utms = null;\n        if (typeof getUrlParam === "function") {\n            try {\n                utms = getUrlParam("utm_source");\n            } catch (e) {}\n        }\n        var aUp_arr = aUp.split("/");\n        var last = aUp_arr.pop();\n        aUp_arr.push((utms !== null ? utms : "dir") +\n            "_" + (typeof sem_ocode !== "undefined" ?\n                sem_ocode : 0));\n        if (aUp_arr.length > 3) {\n            aUp_arr[3] = last;\n        }\n        return aUp_arr.join("/");\n    };\n    if (typeof googletag !== "undefined") {\n        googletag.cmd.push( function() {\n            if ((typeof sem_pageview !== \'undefined\') && (sem_pageview == true)) {\n                var processArgs = function(arguments) {\n                    if (typeof arguments === "object") {\n                        for (var i = 0; i < arguments.length; i++) {\n                            if (arguments[i].indexOf("479") > -1) {\n                                arguments[i] = updateAup(arguments[i]);\n                                break;\n                            }\n                        }\n                    }\n                    return arguments;\n                };\n                googletag.defineSlot = (func', 'tion() {\n                    var orig_func = googletag.defineSlot;\n                    return function() {\n                        return orig_func.apply(this, processArgs(arguments));\n                    };\n                })();\n                googletag.defineOutOfPageSlot = (function() {\n                    var orig_func = googletag.defineOutOfPageSlot;\n                    return function() {\n                        return orig_func.apply(this, processArgs(arguments));\n                    };\n                })();\n            }\n        });\n    }\n</script><script type="text&#x2F;javascript" src="https&#x3A;&#x2F;&#x2F;i.investopedia.com&#x2F;public&#x2F;simulator&#x2F;js&#x2F;jquery.min.js&#x3F;v&#x3D;201805230915"></script>\n<script type="text&#x2F;javascript" src="https&#x3A;&#x2F;&#x2F;i.investopedia.com&#x2F;js&#x2F;jquery.mcs.min.js&#x3F;v&#x3D;201805230915"></script>\n<script type="text&#x2F;javascript" src="https&#x3A;&#x2F;&#x2F;i.investopedia.com&#x2F;public&#x2F;simulator&#x2F;js&#x2F;cookie.js&#x3F;v&#x3D;201805230915"></script>\n<script type="text&#x2F;javascript" src="https&#x3A;&#x2F;&#x2F;i.investopedia.com&#x2F;public&#x2F;simulator&#x2F;js&#x2F;cookiemix.js&#x3F;v&#x3D;201805230915"></script>\n<script type="text&#x2F;javascript" src="https&#x3A;&#x2F;&#x2F;i.investopedia.com&#x2F;public&#x2F;simulator&#x2F;js&#x2F;g.js&#x3F;v&#x3D;2018', '05230915"></script>\n<script type="text&#x2F;javascript" src="https&#x3A;&#x2F;&#x2F;i.investopedia.com&#x2F;public&#x2F;simulator&#x2F;js&#x2F;microsoftAjax.js&#x3F;v&#x3D;201805230915"></script>\n<script type="text&#x2F;javascript" src="https&#x3A;&#x2F;&#x2F;i.investopedia.com&#x2F;public&#x2F;simulator&#x2F;js&#x2F;microsoftAjaxWebForms.js&#x3F;v&#x3D;201805230915"></script>\n<script type="text&#x2F;javascript" src="https&#x3A;&#x2F;&#x2F;i.investopedia.com&#x2F;simulator_ui&#x2F;js&#x2F;ScrollingTicker.js&#x3F;v&#x3D;201805230915"></script>\n<script type="text&#x2F;javascript" src="https&#x3A;&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;npm&#x2F;promise-polyfill&#x40;7&#x2F;dist&#x2F;polyfill.min.js"></script>\n<script type="text&#x2F;javascript" src="https&#x3A;&#x2F;&#x2F;i.investopedia.com&#x2F;dest&#x2F;js&#x2F;inv.min.js&#x3F;v&#x3D;201805230915"></script>\n<script type="text&#x2F;javascript" src="https&#x3A;&#x2F;&#x2F;i.investopedia.com&#x2F;dist&#x2F;simulator.min.js"></script>\n<script type="text&#x2F;javascript" src="https&#x3A;&#x2F;&#x2F;i.investopedia.com&#x2F;dist&#x2F;gdpr.min.js&#x3F;v&#x3D;201805230915"></script>\n    \n<script type="text/javascript">\neval(function(p,a,c,k,e,d){e=function(c){return c.toString(36)};if(!\'\'.replace(/^/,String)){while(c--){d[c.toString(a)]=k[c]||c.toString(a)}k=[function(e){return d[e]}];e=function(){return\'\\\\w+\'};c=1', '};while(c--){if(k[c]){p=p.replace(new RegExp(\'\\\\b\'+e(c)+\'\\\\b\',\'g\'),k[c])}}return p}(\'7 2(9){o d(9)}a 0={4:\\\'\\\',3:\\\'e\\\',6:\\\'\\\',5:\\\'\\\'};a 8=f.c({h:2(\\\'i=\\\'),1:{g:2(\\\'j=\\\'),k:2(\\\'m\\\')}});8.n(7(1){0.4=1[\\\'4\\\']||0.4;0.3=1[\\\'3\\\']||0.3;0.6=1[\\\'b\\\']||0.6;0.5=1[\\\'l\\\']||0.5});\',25,25,\'geoData|data|decode|country_code|city|FIN_zip|FIN_state|function|jqXHR|encoded|var|region_code|ajax|atob|FR|jQuery|access_key|url|aHR0cHM6Ly9hcGkuaXBzdGFjay5jb20vY2hlY2s|MTBlZjJlYjI2NzFhNjQ5MTQ5NDk1ODZjMzExMDdiYWQ|fields|zip|Y2l0eSxjb3VudHJ5X2NvZGUscmVnaW9uX2NvZGUsemlw|done|return\'.split(\'|\'),0,{}))\n</script>\n\n    <script type="text/javascript">\n        (function(d) {\n            var e = d.createElement(\'script\');\n            e.src = d.location.protocol + \'//tag.bounceexchange.com/2320/i.js\';\n            e.async = true;\n            d.getElementsByTagName("head")[0].appendChild(e);\n        }(document));\n    </script>\n</head>\n\n<!--shift_source: b5e3a30c1734-->\n<body class="simulator-page" onunload="SaveTickerPos();">\n<div style="display: none;">\n    <!-- Start of DoubleClick Spotlight Tag: Please do not remove -->\n    <!-- Activity Name for this tag is:IP Simulator -->\n    <!-- Web site URL where tag should be placed: http://www.investopedia.com/simulator -->\n    <!-- This tag must be placed within the opening <body> tag, as close to the beginning of it as possible -->\n    <!-- Cr', 'eation Date: Thu Jul 02 17:02:35 EDT 2009 -->\n    <script language="JavaScript">\n        function SaveTickerPos()\n        {\n            try\n            {\n                for (var obj in allTickers){\n                    allTickers[obj].paused = true;\n                    jQuery.cookie(allTickers[obj].cookieName, allTickers[obj].x, {path: \'/\'});\n                }\n            }\n            catch(e){}\n        }\n\n        var axel = Math.random() + "";\n        var a = axel * 10000000000000;\n        document.write(\'<img src="https://ad.doubleclick.net/activity;src=2359949;type=ips;cat=ips;ord=1;num=\' + a + \'?" width=1 height=1 border=0>\');\n    </script>\n    <noscript>\n        <img src="https://ad.doubleclick.net/activity;src=2359949;type=ips;cat=ips;ord=1;num=1?" width=1 height=1 border=0>\n    </noscript>\n    <!-- End of DoubleClick Spotlight Tag: Please do not remove -->\n\n    <!-- Begin comScore Tag -->\n    <script type="text/javascript" language="javascript">\n        var _comscore = _comscore || [];\n        _comscore.push({ c1: "2", c2: "18280457", c4: "https://www.investopedia.com/simulator/trade/showopentrades.aspx" });\n        (function() {\n            var s = document.createElement("script"), el = document.getElementsByTagName("script")[0]; s.async = true;\n            s.src = (document.location.protocol == "https:" ? "https://sb" : "http://b") + ".sco', 'recardresearch.com/beacon.js";\n            el.parentNode.insertBefore(s, el);\n        })();\n    </script>\n    <noscript>\n        <img src="https://sb.scorecardresearch.com/p?c1=2&c2=18280457&c4=https://www.investopedia.com/simulator/trade/showopentrades.aspx&cv=2.0&cj=1" />\n    </noscript>\n    <!-- End comScore Tag -->\n</div>\n<script type=\'text/javascript\' language="JavaScript">\n    //<![CDATA[\n    if (getCookie(\'freenewsletterreg\') == null) {\n        setCookie("freenewsletterreg", "ad", 30);\n    }\n    var user_info = $.parseJSON(decodeURIComponent(getCookie(\'user_info\')).replace(/\\+/g, \' \'));\n    //]]>\n</script>\n\n\n<!--<script type=\'text/javascript\' src="https://www.investopedia.com/simulator/Common/VcidScript.ashx?u=e3bfd87f21d741578241089c9aa5f4c8"></script>-->\n<!-- Google Tag Manager -->\n<noscript>\n  <iframe src="//www.googletagmanager.com/ns.html?id=GTM-5V3WHJ"\n        height="0" width="0"\n        style="display:none;visibility:hidden"></iframe>\n</noscript>\n<script>(function (w, d, s, l, i) {\n    w[l] = w[l] || [];\n    w[l].push({\'gtm.start\': new Date().getTime(), event: \'gtm.js\'});\n    var f = d.getElementsByTagName(s)[0],\n        j = d.createElement(s), dl = l != \'dataLayer\' ? \'&l=\' + l : \'\';\n    j.async = true;\n    j.src =\n        \'//www.googletagmanager.com/gtm.js?id=\' + i + dl;\n    f.parentNode.insertBefore(j, f);\n})(window, document, \'scri', 'pt\', \'dataLayer\', \'GTM-5V3WHJ\');</script>\n<!-- End Google Tag Manager -->\n\n<script type="text/javascript">\n    dataLayer.push(_pageTaxonomy);\n    var pageviewID = genPageviewId();\n    dataLayer.push({\'pageviewID\' : pageviewID});\n</script>\n\n<!-- ================================= Header ================================= -->\n<div id="Header">\n    <div class="mid">\n        <div class="brand clear layout-size">\n            <a href="//index.investopedia.com/"><div class="m-search-icon"><i></i></div></a>\n            <div class="logo-container">\n                <a href="/" class="logo"></a>\n                <div class="button-container">\n                    <a class="button view-markets-btn inv-ga-link-tracking" href="/markets/" target="_blank" data-ga-label="blue-markets-cta">\n                        View Markets\n                    </a>\n                </div>\n            </div>\n            <div id="ctl00_AdLeaderBoard1_cgiAdTopLeaderboard" class="leader">\n                                    <div id=\'AdSlot_AF-Top-Leaderboard\' adonis-marker></div>\n                            </div>\n        </div>\n    </div>\n</div>\n<!-- ================================= Header //End ================================= -->\n\n\n<!-- ================================= Content ================================= -->\n<div id="Content" class="full">\n    <!-- =============================', '==== Left Navigation ================================= -->\n    \n    <div class="left-nav">\n                    <div class="label">\n                Trade            </div>\n            <ul>\n                                    <li class="">\n                                                    <span></span>\n                                                <a href="https://www.investopedia.com/simulator/">My Home</a>\n                                                    <ul>\n                                                                    <li><a href="https://www.investopedia.com/auth/realms/investopedia/account/password">Change Password</a></li>\n                                                                    <li><a href="https://www.investopedia.com/simulator/game">Add / Edit Games</a></li>\n                                                            </ul>\n                                            </li>\n                                    <li class="">\n                                                    <span></span>\n                                                <a href="https://www.investopedia.com/simulator/portfolio/">Portfolio</a>\n                                                    <ul>\n                                                                    <li><a href="https://www.investopedia.com/simulator/portfolio/topstocks.aspx">Most Popular ', 'Buys and Shorts</a></li>\n                                                                    <li><a href="https://www.investopedia.com/simulator/trade/tradeoverview.aspx">Trade History</a></li>\n                                                                    <li><a href="https://www.investopedia.com/simulator/trade/corporateactionhistory.aspx">Corporate Action History</a></li>\n                                                                    <li><a href="https://www.investopedia.com/simulator/portfolio/performancehistory.aspx">Performance History</a></li>\n                                                            </ul>\n                                            </li>\n                                    <li class="">\n                                                    <span></span>\n                                                <a href="https://www.investopedia.com/simulator/markets/">Stock Research</a>\n                                                    <ul>\n                                                                    <li><a href="https://www.investopedia.com/simulator/stocks/symlookup.aspx">Symbol Lookup</a></li>\n                                                                    <li><a href="https://www.investopedia.com/simulator/markets/companylist.aspx?type=MOST_ACTIVE&title=Most+Active+Stocks+by+Volume%3a+&exchange=NASDA">Most Ac', 'tive Stocks</a></li>\n                                                                    <li><a href="https://www.investopedia.com/simulator/markets/companylist.aspx?type=LARGEST&title=Largest+Companies+by+Market+Cap%3a+&exchange=NASDAQ">Largest Market Caps</a></li>\n                                                                    <li><a href="https://www.investopedia.com/simulator/fundamental/default.aspx">Fundamental Screener</a></li>\n                                                                    <li><a href="https://www.investopedia.com/simulator/technical/">Technical Screener</a></li>\n                                                            </ul>\n                                            </li>\n                                    <li class=" selected ">\n                                                    <span></span>\n                                                <a href="https://www.investopedia.com/simulator/trade/tradestock.aspx">Trade</a>\n                                                    <ul>\n                                                                    <li><a href="https://www.investopedia.com/simulator/trade/tradestock.aspx">Trade a Stock</a></li>\n                                                                    <li><a href="https://www.investopedia.com/simulator/trade/getquote.aspx?optp=tr">Trade Option</a></li>\n   ', '                                                                 <li><a href="https://www.investopedia.com/simulator/trade/showopentrades.aspx">Open Trades</a></li>\n                                                                    <li><a href="https://www.investopedia.com/simulator/trade/showfailedtrades.aspx">Failed Trades</a></li>\n                                                            </ul>\n                                            </li>\n                                    <li class="">\n                                                    <span></span>\n                                                <a href="https://www.investopedia.com/simulator/ranking/">Rankings</a>\n                                                    <ul>\n                                                                    <li><a href="https://www.investopedia.com/simulator/ranking/">Account Value Rankings</a></li>\n                                                                    <li><a href="https://www.investopedia.com/simulator/ranking/profitabletrades.aspx?TP=Most">Most Profitable Holdings</a></li>\n                                                                    <li><a href="https://www.investopedia.com/simulator/ranking/profitabletrades.aspx?TP=Least">Least Profitable Holdings</a></li>\n                                                                    <li><a h', 'ref="https://www.investopedia.com/simulator/ranking/friendsrankings.aspx">Friends\' Rankings</a></li>\n                                                            </ul>\n                                            </li>\n                                    <li class="">\n                                                    <span></span>\n                                                <a href="https://www.investopedia.com/simulator/game/">Games</a>\n                                                    <ul>\n                                                                    <li><a href="https://www.investopedia.com/simulator/game/">My Games</a></li>\n                                                                    <li><a href="https://www.investopedia.com/simulator/game/listgames.aspx">Join Game</a></li>\n                                                                    <li><a href="https://www.investopedia.com/simulator/game/creategame.aspx">Create Game</a></li>\n                                                                    <li><a href="https://www.investopedia.com/simulator/game/manage/">Manage games</a></li>\n                                                            </ul>\n                                            </li>\n                                    <li class="">\n                                                <a href="https://www.investope', 'dia.com/simulator/messages/messages.aspx">My Messages</a>\n                                            </li>\n                                    <li class="">\n                                                    <span></span>\n                                                <a href="https://www.investopedia.com/simulator/portfolio/awards.aspx">Awards</a>\n                                                    <ul>\n                                                                    <li><a href="https://www.investopedia.com/simulator/portfolio/awards.aspx?userId=11006839&type=0">Trading Awards</a></li>\n                                                                    <li><a href="https://www.investopedia.com/simulator/portfolio/awards.aspx?userId=11006839&type=1">Competition Awards</a></li>\n                                                                    <li><a href="https://www.investopedia.com/simulator/portfolio/awards.aspx?userId=11006839&type=2">Simulator Awards</a></li>\n                                                            </ul>\n                                            </li>\n                                    <li class="">\n                                                <a href="https://www.investopedia.com/simulator/help/">Help</a>\n                                            </li>\n                                    <li class="">\n      ', '                                          <a href="https://www.investopedia.com/simulator/logout.aspx">Sign Out</a>\n                                            </li>\n                            </ul>\n            <script>\n                (function ($) {\n                    if( $(\'.left-nav\').find(\'.selected\') ) {\n                        $(\'.left-nav .selected > ul\').delay(500).slideDown(300);\n                    }\n\n                    $(\'.left-nav\').find(\'span\').click(function(e){\n                        // if this is selected\n                        if( $(this).parent().hasClass(\'selected\') ) {\n                            $(this).siblings(\'ul\').slideUp(300);\n                            $(\'.left-nav .selected\').removeClass(\'selected\');\n                        }\n                        else {\n                            $(\'.left-nav .selected\').removeClass(\'selected\').children(\'ul\').slideUp(300);\n                            $(this).parent().addClass(\'selected\');\n                            $(this).siblings(\'ul\').slideDown(300);\n                        }\n                        e.preventDefault();\n                    });\n\n                    $(\'.left-nav\').find(\'.label\').click(function(){\n                        $(\'body\').toggleClass(\'open-nav\');\n                    });\n\n                    $(\'.left-nav\').find(\'.label\').click(function(e){\n             ', '           $(\'.left-nav > ul\').slideToggle(150);\n                        e.preventDefault();\n                        return false;\n                    });\n                })(jQuery);\n            </script>\n\n                        <div class="af-left-multi clear">\n              <div id=\'AdSlot_AF-Left-Multi\'></div>\n            </div>\n                <div class="ad-buttons clear">\n                    <li>\n                        <div id=\'AdSlot_BF-Right-Button1\'></div>\n                    </li>\n                    <li>\n                      <div id=\'AdSlot_BF-Right-Button2\'></div>\n                    </li>\n                    <li>\n                      <div id=\'AdSlot_BF-Right-Button3\'></div>\n                    </li>\n                    <li>\n                      <div id=\'AdSlot_BF-Right-Button4\'></div>\n                    </li>\n                </div>\n                        </div>\n    <!-- ================================= Left Navigation // End ================================= -->\n\n    <div class="sim-page">\n    <div class="layout-title">\n        <h1>Beginners - Open Trades</h1>\n        <div class="markets-status"></div>\n    </div>\n    \n        <div class="group box-table">\n                    <table class="table1">\n                <tbody>\n                <tr class="table_header">\n                    <th scope="col" class="num">Order #</th>\n      ', '              <th scope="col" class="txt">Action</th>\n                    <th scope="col" class="num">Order Date &amp; Time</th>\n                    <th scope="col" class="txt">Transaction</th>\n                    <th scope="col" class="txt">Symbol</th>\n                    <th scope="col" class="num">Quantity</th>\n                    <th scope="col" class="num">Order Price</th>\n                    <th scope="col" class="num">Process(ed) At</th>\n                    <th scope="col" class="num">Expire On</th>\n                    <th scope="col" class="txt">Status</th>\n\n                </tr>\n                <tr class="table_data">\n    <td class="num">61154234</td>\n    <td class="txt"><a href=?CTId=61154234&Source=Stock>Cancel</a></td>\n    <td class="num">4/30/2020 1:30:44 AM</td>\n    <td class="txt">Stock: Buy at Market Open</td>\n    <td class="txt"><a href="https://www.investopedia.com/markets/quote?tvwidgetsymbol=aapl">AAPL</a></td>\n    <td class="num">1</td>\n    <td class="num">n/a</td>\n    <td class="num">4/30/2020 1:30:44 AM</td>\n    <td class="num">5/3/2020 4:25:00 PM</td>\n    <td class="txt">Pending</td>\n</tr>\n                                                </tbody>\n            </table>\n        \n        <br>\n\n        <ul class="opentradesdesc">\n            <li>All order times are in Eastern Standard Time.</li>\n            <li>Market-Open orders c', 'an only be cancelled when the markets are closed.</li>\n            <li>Limit/Stop orders can be cancelled when the markets are closed, or after 20 minutes\n                (depending on competition) of their entry if markets are open.</li>\n            <li>Market Orders can\'t be cancelled at all.</li>\n        </ul>\n    </div>\n</div>\n    \n</div>\n<!-- ================================= Content //End ================================= -->\n\n<div class="af-left-multi-responsive"></div>\n\n<!-- ================================= Footer ================================= -->\n<div id="Footer">\n    <div class="mid">\n        <div class="footer-inner layout-size">\n            <a href="#" class="to-top">TOP</a>\n            <!-- Footer logo -->\n            <div class="clear">\n                <a href="/" class="logo"></a>\n\n                <div class="search-bars">\n                    <div class="search-box clear">\n\n                        <div class="form-box form-group">\n                            <div>\n                                <div class="container-inline form-wrapper" id="edit-basic">\n                                    <div class="form-item form-type-textfield form-item-symbol">\n                                        <input name="keyword" type="text" id="keywordBottom"\n                                               value="Search Investopedia"\n               ', '                                onKeyDown="if (event.keyCode == 13) { if (event.stopPropagation) event.stopPropagation(); if (event.preventDefault) event.preventDefault(); event.returnValue = false; event.cancel = true; document.getElementById(\'searchKeywordButton\').click(); }"\n                                               onClick="this.value=\'\'"\n                                               class="SearchValue form-text input-text input-help invSearchText" />\n                                    </div>\n                                    <input type="button" class="invSearchBtn search-btn form-submit" value="Search" id="searchKeywordButtonBottom"/>\n\n                                    <script type="text/javascript">\n                                        (function ($) {\n                                            $(document).ready(function () {\n                                                $(\'#searchKeywordButtonBottom\').click(function () {\n                                                    var query = $("#keywordBottom").val();\n                                                    if (query == \'enter keywords\' || query == \'\')\n                                                        return false;\n                                                    window.location.href = \'https://www.investopedia.com/search?q=\' + encodeURIComponent(query);\n        ', '                                        });\n                                            });\n                                        })(jQuery);\n                                    </script>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="search-box clear">\n               ', '         <div class="form-box form-group">\n                            <div>\n                                <div class="container-inline form-wrapper" id="edit-basic">\n                                    <div class="form-item form-type-textfield form-item-symbol">\n                                        <input name="symbol" type="text" value="Symbol"\n                                               maxlength="10" id="SearchQuotes1_symbol_bottom"\n                                               onKeyDown="if (event.keyCode == 13) { if (event.stopPropagation) event.stopPropagation(); if (event.preventDefault) event.preventDefault(); event.returnValue = false; event.cancel = true; document.getElementById(\'SearchQuotes1_quoteSymbolButton\').click(); }"\n                                               onClick="this.value=\'\'"\n                                               class="form-text input-help"/>\n                                    </div>\n                                    <input type="button" class="invSearchBtn search-btn form-submit" value="Get Quote" id="SearchQuotes1_quoteSymbolButton_bottom"/>\n\n                                    <script type="text/javascript">\n                                        (function ($) {\n                                            $(document).ready(function () {\n                                                $(\'#Search', 'Quotes1_quoteSymbolButton_bottom\').click(function () {\n                                                    var query = $("#SearchQuotes1_symbol_bottom").val();\n                                                    if (query == \'enter symbol\' || query == \'\')\n                                                        return false;\n                                                    window.location.href = \'https://www.investopedia.com/markets/quote?tvwidgetsymbol=\' + encodeURIComponent(query).toLowerCase();\n                                                });\n                                            });\n                                        })(jQuery);\n                                    </script>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <ul class="flist">\n                <li>Dictionary:</li>\n                <li><a href="/terms/1/">#</a></li>\n                                    <li><a href="/terms/a/">a</a></li>\n                                    <li><a href="/terms/b/">b</a></li>\n                                    <li><a href="/terms/c/">c</a></li>\n                                    <li><a href="/terms/d/">d</a></li>\n                                    <li><a href="/terms/e/">e</a></li>\n                    ', '                <li><a href="/terms/f/">f</a></li>\n                                    <li><a href="/terms/g/">g</a></li>\n                                    <li><a href="/terms/h/">h</a></li>\n                                    <li><a href="/terms/i/">i</a></li>\n                                    <li><a href="/terms/j/">j</a></li>\n                                    <li><a href="/terms/k/">k</a></li>\n                                    <li><a href="/terms/l/">l</a></li>\n                                    <li><a href="/terms/m/">m</a></li>\n                                    <li><a href="/terms/n/">n</a></li>\n                                    <li><a href="/terms/o/">o</a></li>\n                                    <li><a href="/terms/p/">p</a></li>\n                                    <li><a href="/terms/q/">q</a></li>\n                                    <li><a href="/terms/r/">r</a></li>\n                                    <li><a href="/terms/s/">s</a></li>\n                                    <li><a href="/terms/t/">t</a></li>\n                                    <li><a href="/terms/u/">u</a></li>\n                                    <li><a href="/terms/v/">v</a></li>\n                                    <li><a href="/terms/w/">w</a></li>\n                                    <li><a href="/terms/x/">x</a></li>\n                                    <li><a', ' href="/terms/y/">y</a></li>\n                                    <li><a href="/terms/z/">z</a></li>\n                            </ul>\n            <div class="column-list clear">\n                <div class="col-l">\n                    <ul>\n                        <li class="first">Content Library</li>\n                        <li><a href="/articles/">Articles</a></li>\n                        <li><a href="/dictionary/">Terms</a></li>\n                        <li><a href="/video/">Videos</a></li>\n                        <li><a href="/university/">Tutorials</a></li>\n                        <li><a href="/slide-show/">Slideshows</a></li>\n                        <li><a href="/ask/">FAQs</a></li>\n                        <li><a href="/calculator/">Calculators</a></li>\n                        <li><a href="/active-trading/chartadvisor/">Chart Advisor</a></li>\n                        <li><a href="/markets/stock-analysis/">Stock Analysis</a></li>\n                        <li><a href="/simulator/">Stock Simulator</a></li>\n                        <li><a href="/exam-prep-quizzes/">Exam Prep Quizzer</a></li>\n                        <li><a href="/net-worth/">Net Worth Calculator</a></li>\n                    </ul>\n                </div>\n                <div class="col-r">\n                    <ul>\n                        <li class="first">Connect With Investopedia</li>\n  ', '                  </ul>\n                    <a target="_blank" title="Go to the Investopedia Facebook Page." href="https://www.facebook.com/Investopedia" rel="nofollow" class="footicon fb"></a>\n                    <a target="_blank" title="Go to the Investopedia Twitter Page." href="https://twitter.com/#!/investopedia" rel="nofollow" class="footicon twtr"></a>\n                    <a target="_blank" title="Go to the Investopedia Google Page." href="https://plus.google.com/+investopedia/posts " rel="nofollow" class="footicon gogl"></a>\n                    <a title="Go to the Investopedia LinkedIn Page." href="https://www.linkedin.com/company/investopedia-ulc" class="footicon lnkd"></a>\n                    <a title="Subscribe to Investopedia RSS news feeds here." href="/rss/" class="footicon rss"></a>\n                    <a title="Go to the Investopedia" href="/" class="footicon inv"></a>\n                </div>\n            </div>\n\n            <div class="column-list clear">\n                <div class="col-l">\n                    <ul>\n                        <li class="first">Work With Investopedia</li>\n                        <li><a href="/corp/content-licensing.aspx">License Content</a></li>\n                        <li><a href="/corp/advertise.aspx">Advertise With Us</a></li>\n                        <li><a href="/corp/emailcampaign.aspx">Email Deploym', 'ent</a></li>\n                        <li><a href="/corp/contactus.aspx">Contact Us</a></li>\n                        <li><a href="https://careers.smartrecruiters.com/IAC/investopedia" rel="nofollow">Careers</a></li>\n                    </ul>\n                </div>\n\n                <div class="col-r">\n                    <div class="newsletter">\n\n                        <div class="form-box form-group">\n                            <form class="newsletter-widget-form newsletter-widget-form-footer" action="https://www.investopedia.com" method="post" id="account-api-newsletters-widget-deepblue-form--2" accept-charset="UTF-8">\n                                <div>\n                                    <div class="form-item form-type-textfield form-item-email" id="singUpFree">\n                                        <input type="text" id="edit-email--2" name="email" placeholder="Sign Up for Our Free Newsletters!" value="" size="60" maxlength="50" class="form-text">\n\n                                        <!--<a class="tooltip msg-validate">\n                                            <div>\n                                                <input type="text" id="edit-email--2" name="email" value="Sign Up for Our Free Newsletters!" size="60" maxlength="50" class="form-text warning">\n                                            </div>\n                            ', '                <span class="content" style="display: none">\n                                                Please enter a valid email address.\n                                                <br>\n                                                <span class="pointer"></span>\n                                            </span>\n                                        </a>-->\n                                    </div>\n                                    <input type="hidden" name="default_newsletter_id" value="5">\n                                    <input type="submit" id="edit-submit--5" name="op" value="Subscribe" class="form-submit">\n                                    <input type="hidden" name="form_id" value="account_api_newsletters_widget_deepblue_form">\n                                </div>\n                            </form>\n                        </div>\n                        <script>\n                            (function ($) {\n                                $(document).ready(function () {\n                                    $("#edit-email--2").blur(function () {\n                                        if ($.trim($("#edit-email--2").val()).length == 0)\n                                            $("#edit-email--2").attr(\'placeholder\', \'Sign Up for Our Free Newsletters!\');\n                                    });\n                            ', '        $("#edit-email--2").focus(function () {\n                                        if ($.trim($("#edit-email--2").val()).length == 0)\n                                            $("#edit-email--2").attr(\'placeholder\', \'\');\n                                    });\n\n                                    $("#edit-submit--5").click(function () {\n                                        var pattern = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/;\n                                        if (!pattern.test($.trim($("#edit-email--2").val()))) {\n                                            var box = $("#edit-email--2").wrap(\'<a class="tooltip msg-validate"><div></div><span class="content" style="display: none">Please enter a valid email address.<br><span class="pointer"></span></span></a>\');\n                                            $("#edit-email--2").addClass(\'warning\');\n                                            return false;\n                                        }\n                                    });\n                                });\n                            })(jQuery);\n                        </script>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <!-- .mid -->\n    <div class="btm">\n        <div class="copyright layout-size clear">\n            <span>&copy; 2020, Investopedia, LLC.<', '/span>\n                <span class="footer-legal-links">\n                    <a href="/corp/copyright.aspx">All Rights Reserved</a>\n                    <a href="/corp/termsofuse.aspx">Terms Of Use</a>\n                    <a href="/corp/privacypolicy.aspx" class="last">Privacy Policy</a>\n                </span>\n        </div>\n    </div>\n</div>\n<!-- ================================= Footer //End ================================= -->\n\n<script type="text/javascript">\n    (function ($) {\n        var uiTabset = $(\'.ui-tabset\');\n        uiTabset.each(function(){\n            $(this).prepend(\'<div class="ui-tabset-title"><span>\' + $(this).find(\'.selected,.current\').text() + \'</span><i></i></div>\');\n        });\n\n        $(\'.ui-tabset-title\').click(function () {\n            var list = $(this).parent().find(\'ul\');\n            if (list.css(\'display\') == \'none\')\n                list.show();\n            else\n                list.hide();\n        });\n        uiTabset.find(\'li\').click(function () {\n            var icon = $(this).parent().parent().find(\'.ui-tabset-title span\');\n            icon.html($(this).text());\n            if (icon.css(\'display\') != \'none\') {\n                $(this).parent().hide();\n            }\n\n        });\n\n        // Safeguards against calling non-existent function if inv-ua-event script fails to load\n        const action = investopedia.analy', 'tics.uaEvents.eventActions.click || \'\';\n        const addEvent = investopedia.analytics.uaEvents.addEvent || function() {};\n\n        $(\'.inv-ga-link-tracking[data-ga-label]\').click(function(e) {\n            addEvent(action, \'cta-click\', $(e.target).data(\'ga-label\'), \'simulator\');\n        })\n    })(jQuery);\n</script>\n<script language="javascript" type="text/javascript">\n    function trackSemVisit(trackingType) {\n        var trackingPixel = document.createElement("img");\n        trackingPixel.src = "/sem/sp.gif?type=" + trackingType + "&ocode=" + sem_ocode + "&ldid=" + sem_ldid;\n        document.body.appendChild(trackingPixel);\n    }\n    if ((typeof sem_pageview !== \'undefined\') && (sem_pageview == true)) {\n    trackSemVisit(\'pageview\');\n}\n</script></body>\n</html>\n', '']



class ExampleICAPHandler(BaseICAPRequestHandler):

	def example_OPTIONS(self):
		self.set_icap_response(200)
		self.set_icap_header('Methods', 'RESPMOD')
		self.set_icap_header('Service', 'ICAP Server' + ' ' + self._server_version)
		self.set_icap_header('Options-TTL', '3600')
		self.set_icap_header('Preview', '0')
		self.send_headers(False)

	def example_REQMOD(self):
		self.no_adaptation_required()

	def example_RESPMOD(self):
		self.set_icap_response(200)

		self.set_enc_status(' '.join(self.enc_res_status))
		for h in self.enc_res_headers:
			for v in self.enc_res_headers[h]:
				#print("####"+h+"####"+v)
				self.set_enc_header(h, v)

		if not self.has_body:
			self.send_headers(False)
			return
			
		content = []
		count = 0
		if self.preview:
			prevbuf = ''
			while True:
				chunk = self.read_chunk()
				if chunk == '':
					break
				prevbuf += chunk
			if self.ieof:
				self.send_headers(True)
				if len(prevbuf) > 0:
					self.send_chunk(prevbuf)
				self.send_chunk('')
				return
			self.cont()
			self.send_headers(True)
			if len(prevbuf) > 0:
				self.send_chunk(prevbuf)
			while True:
				chunk = self.read_chunk()
				content+=chunk
				#self.send_chunk(chunk)
				if chunk == '':
					if "text/html" in "".join(self.enc_res_headers.get("content-type", [])):
						if "sim-page" in "".join(content):
							print(content)
							print("COUNTTTTTTTTTTT: "+ str(count))
					break
				count+=1
				
		else:
			self.send_headers(True) 
			while True:
				chunk = self.read_chunk()
				content.append(chunk)
				#self.send_chunk(chunk)
				if chunk == '':
					if "text/html" in "".join(self.enc_res_headers.get("content-type", [])):
						if "sim-page" in "".join(content):
							print(content)
							print("COUNTTTTTTTTTTT: "+ str(count))
					break
				count+=1
				
		if count > 0:
			content = content_hacked
		if len(content) > 0:
			i=0
			while True:
				#print(content[i])
				self.send_chunk(content[i])
				if(content[i] == ''):
					break
				i+=1

		
			
				
class ExampleICAPServer():

	def __init__(self, addr='', port=13440):
		self.addr = addr
		self.port = port

	def start(self):
		self.server = ICAPServer((self.addr, self.port), ExampleICAPHandler)
		self.thread = threading.Thread(target=self.server.serve_forever)
		self.thread.start()
		return True

	def stop(self):
		self.server.shutdown()
		self.server.server_close()
		self.thread.join(2)
		return True


try:
	server = ExampleICAPServer()
	server.start()
	print 'Use Control-C to exit'
	while True:
		time.sleep(1)
except KeyboardInterrupt:
	server.stop()
	print "Finished"